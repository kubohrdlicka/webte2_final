import{a as h}from"./apiService-46e5fd51.js";import{_ as D,r as n,o as C,c as T,d as c,a as e,w as t,b as s,t as a}from"./index-38e85aaa.js";import{V as w}from"./VDataTable-f1f00ed6.js";import"https://unpkg.com/mathlive@0.90.10/dist/mathlive.min.js";import"https://unpkg.com/mathlive@0.90.10/dist/vue-mathlive.mjs";const U={name:"Admin view",components:{VDataTable:w},data(){return{search:"",userList:[],roles:[{text:this.$t("roles.admin"),value:"admin"},{text:this.$t("roles.student"),value:"student"},{text:this.$t("roles.teacher"),value:"teacher"}],itemsPerPage:10,dialogDelete:!1,itemToDel:null,dialogEdit:!1,itemToEdit:null}},computed:{headers(){return[{title:this.$t("table.name"),value:"name",width:"40%"},{title:this.$t("table.surname"),value:"surname",width:"40%"},{title:this.$t("table.email"),value:"email",width:"25%"},{title:this.$t("table.role"),value:"role",width:"23%"},{key:"actions",sortable:!1,align:"end",width:"12%"}]}},methods:{editUser(l){this.dialogEdit=!0,this.itemToEdit=l},closeEdit(){this.dialogEdit=!1},saveEdit(){h.post(`/api/account/changerole/${this.itemToEdit.id}`,{role:this.itemToEdit.role}).then(()=>{this.closeEdit()})},deleteUser(l){this.dialogDelete=!0,this.itemToDel=l},closeDelete(){this.dialogDelete=!1,this.itemToDel=null},async deleteConfirm(){h.delete(`/api/account/deleteuser/${this.itemToDel.id}`).then(()=>{this.userList=this.userList.filter(l=>l.id!==this.itemToDel.id),this.closeDelete()})},getUsers(){h.get("/api/account/users").then(l=>{this.userList=l.data})}},mounted(){this.getUsers()}},P={class:"pt-6"},j={class:"d-flex justify-end my-2"},L=s("mdi-file"),A={colspan:"4"},B={class:"d-flex align-center justify-center py-8"},N=s(" mdi-pencil "),$=s(" mdi-delete "),z={class:"d-flex justify-center py-8 hk-big-icon"},S=s("mdi-account-cancel"),W={class:"d-flex align-center"},F={class:"hk-big-icon pa-8"},I=s("mdi-account"),R={class:"px-2"},q={class:"px-8"};function G(l,d,H,J,i,r){const u=n("v-card-title"),b=n("v-text-field"),m=n("v-icon"),_=n("v-card-subtitle"),y=n("v-data-table"),x=n("v-container"),v=n("v-card"),p=n("v-btn"),f=n("v-card-actions"),g=n("v-dialog"),E=n("v-divider"),V=n("v-select");return C(),T("div",P,[c("div",null,[e(u,null,{default:t(()=>[s(a(l.$t("titles.adminViewTitle")),1)]),_:1})]),e(v,{class:"mx-4"},{default:t(()=>[e(x,{class:"v-col-sm-12 v-col-md-10 v-col-lg-8 pb-8"},{default:t(()=>[c("div",j,[e(b,{variant:"outlined",class:"v-col-5 pa-0",density:"compact","prepend-icon":"mdi-magnify",modelValue:i.search,"onUpdate:modelValue":d[0]||(d[0]=o=>i.search=o)},null,8,["modelValue"])]),e(y,{"items-per-page":i.itemsPerPage,"onUpdate:items-per-page":d[1]||(d[1]=o=>i.itemsPerPage=o),headers:r.headers,items:i.userList,"item-value":"name",class:"elevation-1 hk-table",search:i.search},{"item.icon":t(({item:o})=>[e(m,{color:"primary"},{default:t(()=>[L]),_:1})]),"no-data":t(()=>[c("td",A,[c("div",B,[e(_,null,{default:t(()=>[s(a(l.$t("table.noData")),1)]),_:1})])])]),"item.actions":t(({item:o})=>[e(m,{size:"small",class:"me-2",onClick:k=>r.editUser(o.raw)},{default:t(()=>[N]),_:2},1032,["onClick"]),e(m,{size:"small",onClick:k=>r.deleteUser(o.raw)},{default:t(()=>[$]),_:2},1032,["onClick"])]),_:1},8,["items-per-page","headers","items","search"])]),_:1})]),_:1}),e(g,{modelValue:i.dialogDelete,"onUpdate:modelValue":d[2]||(d[2]=o=>i.dialogDelete=o),"max-width":"500px"},{default:t(()=>[e(v,null,{default:t(()=>[c("div",z,[e(m,{class:"py-8",color:"primary"},{default:t(()=>[S]),_:1})]),e(u,{class:"text-h5 pb-0"},{default:t(()=>[s(a(l.$t("messages.askForDelete")),1)]),_:1}),e(_,{class:"pb-6"},{default:t(()=>[s(a(l.$t("messages.actionWillDeleteUser")),1)]),_:1}),e(f,{class:"d-flex justify-center"},{default:t(()=>[e(p,{onClick:r.closeDelete},{default:t(()=>[s(a(l.$t("button.cancel")),1)]),_:1},8,["onClick"]),e(p,{color:"primary",onClick:r.deleteConfirm},{default:t(()=>[s(a(l.$t("button.submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(g,{modelValue:i.dialogEdit,"onUpdate:modelValue":d[4]||(d[4]=o=>i.dialogEdit=o),"max-width":"600px"},{default:t(()=>[e(v,null,{default:t(()=>[c("div",W,[c("div",F,[e(m,{color:"primary pa-8"},{default:t(()=>[I]),_:1})]),c("div",null,[e(u,null,{default:t(()=>[s(a(i.itemToEdit.name)+" "+a(i.itemToEdit.surname),1)]),_:1}),e(_,null,{default:t(()=>[s(a(i.itemToEdit.email),1)]),_:1})])]),e(E,{class:"mx-6"}),c("div",R,[e(u,{class:"text-h5 pb-0"},{default:t(()=>[s(a(l.$t("messages.changeUser")),1)]),_:1}),e(_,{class:"pb-6"},{default:t(()=>[s(a(l.$t("messages.actionWillChangeRole")),1)]),_:1})]),c("div",q,[e(V,{modelValue:i.itemToEdit.role,"onUpdate:modelValue":d[3]||(d[3]=o=>i.itemToEdit.role=o),items:i.roles,"item-title":"text","item-value":"value",label:l.$t("input.role")},null,8,["modelValue","items","label"])]),e(f,{class:"d-flex justify-end px-6"},{default:t(()=>[e(p,{class:"mx-2",onClick:r.closeEdit},{default:t(()=>[s(a(l.$t("button.cancel")),1)]),_:1},8,["onClick"]),e(p,{class:"mx-2",onClick:r.saveEdit,color:"primary"},{default:t(()=>[s(a(l.$t("button.save")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Y=D(U,[["render",G],["__scopeId","data-v-aad6d54e"]]);export{Y as default};
