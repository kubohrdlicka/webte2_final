import{_ as b,o as _,c as g,h as V,r as o,a as m,g as B,w as u,f as T,d as i,b as p,t as l,F as A,e as D}from"./index-38e85aaa.js";import{a as f}from"./apiService-46e5fd51.js";import{l as H,m as L}from"./latex-8cc23a9f.js";import{V as S}from"./VDataTable-f1f00ed6.js";import"https://unpkg.com/mathlive@0.90.10/dist/mathlive.min.js";import"https://unpkg.com/mathlive@0.90.10/dist/vue-mathlive.mjs";const I={name:"AssigmentGiver",props:{assigment:String},computed:{htmlContent(){if(this.assigment){const t=new H({hyphenate:!1,CustomMacros:function(){function n(a){this.g=a}var v=n.args={},s=n.prototype;return v.includegraphics=["H","k"],s.includegraphics=function(a){a=a.split("/").pop();let c=this.g.create("img"),h="https://site124.webte.fei.stuba.sk/final";return c.src=h+"/"+a,c.className="img-fluid",[c]},n}()});let e=L(this.assigment,{generator:t});return e=e.domFragment(),e.firstChild.outerHTML}}}},M=["innerHTML"];function N(t,e,n,v,s,a){return _(),g("div",{innerHTML:a.htmlContent},null,8,M)}const E=b(I,[["render",N]]),G={name:"Results view",components:{VDataTable:S,AssigmentGiver:E},data(){return{expanded:[],tableHeaders:[{title:this.$t("table.name"),value:"student.name"},{title:this.$t("table.surname"),value:"student.surname"},{title:this.$t("table.points"),value:"sumpoints"},{title:this.$t("table.maxPoints"),value:"totalpoints"}],singleExpand:!0,assigments:[],tableData:null,active:!1,select:null}},watch:{select:function(t){this.getAssigmentInfo(t)}},methods:{getData(){f.get("/api/allassigments").then(t=>{this.assigments=t.data})},getCSV(){V({url:"https://site124.webte.fei.stuba.sk/final/api/generatecsv",method:"GET",responseType:"blob",headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{const e=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=e,n.setAttribute("download","file.csv"),document.body.appendChild(n),n.click()})},getAssigmentInfo(t){f.get("/api/assigmentpoints/"+t).then(e=>{console.log(e.data),this.tableData=e.data,this.active=!0})}},mounted(){this.getData()}},R={class:"pt-6"},U=["colspan"],j={class:"d-flex allign-start justify-space-between"},F=i("div",null,null,-1),z={class:"d-flex justify-end ma-4"};function O(t,e,n,v,s,a){const c=o("v-select"),h=o("v-toolbar-title"),x=o("v-spacer"),y=o("v-toolbar"),w=o("assigment-giver"),$=o("v-data-table"),k=o("v-btn");return _(),g("div",R,[m(c,{items:s.assigments,modelValue:s.select,"onUpdate:modelValue":e[0]||(e[0]=r=>s.select=r),label:t.$t("fancy.select"),"item-text":"name","item-value":"id"},null,8,["items","modelValue","label"]),s.active?(_(),B($,{key:0,expanded:s.expanded,"onUpdate:expanded":e[1]||(e[1]=r=>s.expanded=r),headers:s.tableHeaders,items:s.tableData,"item-key":"name","show-expand":"",class:"elevation-1"},{top:u(()=>[m(y,{flat:"",color:"primary"},{default:u(()=>[m(h,null,{default:u(()=>[p(l(t.$t("fancy.name")),1)]),_:1}),m(x)]),_:1})]),"expanded-row":u(({columns:r,item:C})=>[i("tr",null,[i("td",{colspan:r.length},[(_(!0),g(A,null,D(C.raw.points,d=>(_(),g("div",null,[i("h4",null,l(d.examBundleId.title),1),i("div",j,[p(l(d.task[0].solutions)+" ",1),i("div",null,[p(l(t.$t("fancy.solutionTitle"))+" ",1),m(w,{assigment:"$$"+d.student_exam[0].studen_solution+"$$"},null,8,["assigment"])]),p(" "+l(d.student_exam[0].earned_points)+" / "+l(d.examBundleId.points),1)])]))),256))],8,U)])]),_:1},8,["expanded","headers","items"])):T("",!0),F,i("div",z,[m(k,{onClick:e[2]||(e[2]=r=>a.getCSV()),class:"mx-2",color:"primary"},{default:u(()=>[p(l(t.$t("button.csv")),1)]),_:1})])])}const X=b(G,[["render",O]]);export{X as default};
